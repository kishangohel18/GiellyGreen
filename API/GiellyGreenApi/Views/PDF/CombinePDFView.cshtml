@model List<GiellyGreenApi.Models.CombineSupplierInvoice>
@{
    Layout = "";
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />

    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")

    <link href="http://fonts.cdnfonts.com/css/dax" rel="stylesheet">
    <style>
        body {
            font-family: 'Dax';
            font-size: 20px;
            font-weight: 600 !important;
        }
        .fontSize{
            font-size: 30px;
        }
        .PaddingTop {
            height: 32px;
        }

        .AddBorder {
            border: 1px solid black;
        }
        .footer{
           margin-top: 200px;
        }
        .print:last-child {
            page-break-after: auto;
        }

        .print {
            page-break-after: always;
        }
    </style>
</head>
<body>
    @foreach (var item in Model)
    {
    <div class="container print">
        @{
            string strDate = "";
            if (item.Month_Header.InvoiceDate != null)
            {
                var ArrayDate = item.Month_Header.InvoiceDate.ToString().Split('-');
                string getDay = ArrayDate[0];
                strDate = String.Format("{0}/{1}/{2}", getDay, item.Month_Header.InvoiceMonth.ToString(), item.Month_Header.InvoiceYear.ToString());
            }

            string path = HttpContext.Current.Server.MapPath("~/ImageStorage");

            if (!Directory.Exists(path))
            {
                Directory.CreateDirectory(path);
            }
        }
        <table width="100%">
            <tr>
                <td width="40%">
                    @if (@item.Supplier.LogoUrl != null)
                    {
                        string imgPath = Path.Combine(path, item.Supplier.LogoUrl);
                        byte[] imageByte = File.ReadAllBytes(imgPath);
                        item.Supplier.LogoUrl = Convert.ToBase64String(imageByte);

                        <div><img src='data:image/jpg;base64,@item.Supplier.LogoUrl' style="width:200px; height: 100px;" /></div>
                    }
                </td>
                <td width="60%" class="text-right"><div class="text-right fontSize"><p>Self Billed Invoice</p></div></td>
            </tr>
            <tr>
                <td><p> @item.Supplier.SupplierName </p> <p> @item.Supplier.BusinessAddress</p></td>
                <td>
                    <div>
                        <div class="text-right">
                            <p> Invoice Date :  @strDate</p>
                        </div>
                        <div class="text-right">
                            <p> Invoice Ref :  @item.Supplier.SupplierReference _ @item.Month_Header.InvoiceReferance</p>
                        </div>
                        <br />
                        @if (item.Supplier.TaxReference != null)
                        {
                            <div class="text-right"><p>Tax Ref :  @item.Supplier.TaxReference</p></div>
                        }
                        @if (item.Supplier.VatNumber != null)
                        {
                            <div class="text-right"><p>VAT Number :  @item.Supplier.VatNumber</p></div>
                        }
                    </div>
                </td>
            </tr>
            <tr>
                <td>
                    <div class="text-left">
                        <p>
                            Block-C 601, Ganesh Meridian, Nr. New
                            Gujarat High Court, S. G. Highway,
                            Ahmedabad 380060, Gujarat, India.
                        </p>
                    </div>
                </td>
                <td></td>
            </tr>            
        </table>
        <br />

        <table width="100%">
            <thead>
                <tr class="AddBorder PaddingTop">
                    <td width="60%" style="text-align: center;">Description</td>
                    <td width="20%"></td>
                    <td width="20%" style="text-align: right;">Amount(GBP)&nbsp;</td>
                </tr>
            </thead>
            <tbody>
                <tr class="AddBorder PaddingTop">
                    <td class="AddBorder">&nbsp; Hair Services</td>
                    <td class="AddBorder"></td>
                    <td style="text-align:right;" class="AddBorder">@item.Invoice.HairService &nbsp; </td>
                </tr>
                <tr class="AddBorder PaddingTop">
                    <td class="AddBorder">&nbsp; Beauty Services</td>
                    <td class="AddBorder"></td>
                    <td style="text-align:right;" class="AddBorder">@item.Invoice.BeautyService &nbsp; </td>
                </tr>

                @if (item.Invoice.Custom1 != null && item.Invoice.Custom1 != 0)
                {
                    <tr class="AddBorder PaddingTop">
                        <td class="AddBorder">&nbsp; @item.Month_Header.Custom1</td>
                        <td class="AddBorder"></td>
                        <td style="text-align:right;" class="AddBorder">@item.Invoice.Custom1&nbsp; </td>
                    </tr>
                }
                @if (item.Invoice.Custom2 != null && item.Invoice.Custom2 != 0)
                {
                    <tr class="AddBorder PaddingTop">
                        <td class="AddBorder">&nbsp; @Html.DisplayFor(model => item.Month_Header.Custom2)</td>
                        <td class="AddBorder"></td>
                        <td style="text-align:right;" class="AddBorder">@item.Invoice.Custom2&nbsp; </td>
                    </tr>
                }
                @if (item.Invoice.Custom3 != null && item.Invoice.Custom3 != 0)
                {
                    <tr class="AddBorder PaddingTop">
                        <td class="AddBorder">&nbsp; @item.Month_Header.Custom3</td>
                        <td class="AddBorder"></td>
                        <td style="text-align:right;" class="AddBorder">@item.Invoice.Custom3&nbsp; </td>
                    </tr>
                }
                @if (item.Invoice.Custom4 != null && item.Invoice.Custom4 != 0)
                {
                    <tr class="AddBorder PaddingTop">
                        <td class="AddBorder">&nbsp; @item.Month_Header.Custom4</td>
                        <td class="AddBorder"></td>
                        <td style="text-align:right;" class="AddBorder">@item.Invoice.Custom4&nbsp; </td>
                    </tr>
                }
                @if (item.Invoice.Custom5 != null && item.Invoice.Custom5 != 0)
                {
                    <tr class="AddBorder PaddingTop">
                        <td class="AddBorder">&nbsp; @item.Month_Header.Custom5</td>
                        <td class="AddBorder"></td>
                        <td style="text-align:right;" class="AddBorder">@item.Invoice.Custom5&nbsp; </td>
                    </tr>
                }
                <tr class="text-right PaddingTop">
                    <td></td>
                    <td>Subtotal (Net)&nbsp; </td>
                    <td style="text-align:right;" class="AddBorder">@Convert.ToDecimal(item.Invoice.Net).ToString("N2") &nbsp;</td>
                </tr>
                <tr class="text-right PaddingTop">
                    <td></td>
                    <td>Vat&nbsp; </td>
                    <td style="text-align:right;" class="AddBorder">@Convert.ToDecimal(item.Invoice.Vat).ToString("N2")&nbsp; </td>
                </tr>
                <tr class="text-right PaddingTop">
                    <td></td>
                    <td>Advance paid&nbsp; </td>
                    <td style="text-align:right;" class="AddBorder"> @Convert.ToDecimal(item.Invoice.AdvancePaid).ToString("N2")&nbsp; </td>
                </tr>
                <tr class="text-right PaddingTop">
                    <td></td>
                    <td>Balance due&nbsp; </td>
                    <td style="text-align:right;" class="AddBorder">@Convert.ToDecimal(item.Invoice.Balance).ToString("N2") &nbsp;</td>
                </tr>
            </tbody>
        </table>
        @if (item.Supplier.CompanyRegAddress != "")
        {
            <div class="footer">
                <table>
                    <tr>
                        <td><p>To : &nbsp;@item.Supplier.CompanyRegAddress</p></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>                
            </div>
        }
    </div>
    }
</body>
</html>

